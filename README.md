
# Introduction
This is an analysis code for studying cross corellations between neturino events and various galaxy samples.
It provides an interface for handling data, performing the cross correlation, and calculating statistical significance.
The analysis scripts which produce plots for IceCube publication are in located in the [IceCube Neutrino Sources Working Group repository](https://github.com/icecube/wg-nu-sources).

This code is derived from the analysis of public IceCube Data by [Fang et al. 2020](https://iopscience.iop.org/article/10.3847/1538-4357/ab8561/meta).
The methodology has been updated in a few ways to maximize the sensitivity by taking advantage of IceCube internal data and tools.
The code has been adapted to use these internal data and software behind the scenes.
If you do not have access to IceCube internal resources, you will not be able to use this code.

# Installation

1. `cd` into the directory you wish to store the code.

1. Clone the repo from github
    - `git clone https://github.com/dguevel/nuXgal.git`

1. `cd` into the nuXgal code directory
    `cd nuXgal`

1. Check out the version of the code corresponding to the reproducibility review. 
    - `git checkout tags/v0.3`

1. Create and activate a virtual environment
    - `python -m venv /path/to/venv/cc`
    - `source /path/to/venv/cc/bin/activate`

1. Install the code. Csky will need to be installed separately first.
    - `pip install git+ssh://git@github.com/icecube/csky.git`
    - `pip install .`

# Usage
Scripts you may want to use live in the scripts directory.
* `nuXgal-generate-data.py` generates synthetic trials.
* `nuXgal-fit-data.py` fits date generated by the previous script.
* `compute_covariance.py` calculates a covariance matrix from synthetic trials.
* `nuXgal-unblind.py` does the cross correlation with the real data.

Each script contains help text describing the usage.